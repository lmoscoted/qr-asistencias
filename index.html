<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>📋 Control de Asistencia QR</title>
  <link rel="stylesheet" href="/src/styles.css" />
</head>
<body>
  <div class="scanner-container">
    <!-- Header -->
    <h2>📋 Control de Asistencia</h2>

    <!-- Login/Usuario -->
    <div id="user-info" style="display:none; margin-bottom: 20px;">
      <span id="user-email"></span>
      <button id="logout-btn">Cerrar sesión</button>
    </div>

    <form id="login-form" style="margin-bottom:20px;">
      <input type="email" id="email" placeholder="Email" required/><br>
      <input type="password" id="password" placeholder="Contraseña" required/><br>
      <button type="submit">Iniciar sesión</button>
    </form>
    <!--
    <button id="google-btn">Iniciar sesión con Google</button>
    -->

    <div id="mensaje" style="margin-bottom:20px;"></div>

    <!-- Escáner QR, solo visible si está autenticado -->
    <div id="scanner-ui" style="display:none;">
      <p><span class="status-indicator"></span>Apunta la cámara al código QR</p>
      <video id="qr-video" autoplay muted playsinline></video>
      <div id="scan-result" style="display:none;" class="success">
        <h3>✅ Asistencia Registrada</h3>
        <p id="student-info"></p>
        <small id="timestamp-info"></small>
      </div>
      <div id="loading" style="display:none;" class="loading">
        ⏳ Procesando asistencia...
      </div>
      <div id="error" style="display:none; background:#f44336; color:white; padding:15px; border-radius:10px; margin-top:20px;">
        <h4>❌ Error</h4>
        <p id="error-message"></p>
        <button id="retry-btn" style="background:white; color:#f44336; border:none; padding:10px 20px; border-radius:5px; cursor:pointer;">
          🔄 Reintentar
        </button>
      </div>
    </div>
  </div>
  <script type="module" src="/src/main.js"></script>
</body>
</html>